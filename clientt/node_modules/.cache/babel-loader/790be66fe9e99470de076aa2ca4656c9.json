{"ast":null,"code":"import _objectSpread from\"/home/user/Desktop/blogify/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/user/Desktop/blogify/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import FileBase64 from\"react-file-base64\";import{useDispatch}from\"react-redux\";import{makeStyles}from\"@material-ui/core/styles\";import{TextField,Select,Input,MenuItem,Button}from\"@material-ui/core\";import{useForm,Controller}from\"react-hook-form\";import{yupResolver}from\"@hookform/resolvers/yup\";import*as yup from\"yup\";import{updatePost}from\"../actions/post\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{textField:{marginBottom:theme.spacing(2)},buttons:{marginTop:theme.spacing(2)}};});var tags=[\"fun\",\"programming\",\"health\",\"science\"];var postSchema=yup.object().shape({title:yup.string().required(),subtitle:yup.string().required(),content:yup.string().min(20).required(),tag:yup.mixed().oneOf(tags)});var EditPostForm=function EditPostForm(_ref){var history=_ref.history,post=_ref.post,closeEditMode=_ref.closeEditMode;var dispatch=useDispatch();var _useState=useState(post===null||post===void 0?void 0:post.image),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useForm=useForm({resolver:yupResolver(postSchema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,control=_useForm.control,errors=_useForm.errors,reset=_useForm.reset;var onSubmit=function onSubmit(data){var updatedPost=_objectSpread(_objectSpread({_id:post._id},data),{},{image:file});dispatch(updatePost(post._id,updatedPost));reset();setFile(null);closeEditMode();};var classes=useStyles();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{noValidate:true,autoComplete:\"off\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(TextField,{id:\"title\",label:\"Title\",name:\"title\",variant:\"outlined\",className:classes.textField,size:\"small\",inputRef:register,error:errors.title?true:false,fullWidth:true,defaultValue:post===null||post===void 0?void 0:post.title}),/*#__PURE__*/_jsx(TextField,{id:\"subtitle\",label:\"Subtitle\",name:\"subtitle\",variant:\"outlined\",className:classes.textField,size:\"small\",inputRef:register,error:errors.subtitle?true:false,fullWidth:true,defaultValue:post===null||post===void 0?void 0:post.subtitle}),/*#__PURE__*/_jsx(Controller,{as:/*#__PURE__*/_jsx(Select,{input:/*#__PURE__*/_jsx(Input,{}),className:classes.textField,children:tags.map(function(tag,index){return/*#__PURE__*/_jsx(MenuItem,{value:tag,children:tag},index);})}),name:\"tag\",control:control,error:errors.tag?true:false,defaultValue:post===null||post===void 0?void 0:post.tag}),/*#__PURE__*/_jsx(TextField,{id:\"content\",label:\"Content\",name:\"content\",multiline:true,size:\"small\",inputRef:register,rows:4,className:classes.textField,variant:\"outlined\",error:errors.content?true:false,fullWidth:true,defaultValue:post===null||post===void 0?void 0:post.content}),/*#__PURE__*/_jsx(FileBase64,{multiple:false,onDone:function onDone(_ref2){var base64=_ref2.base64;return setFile(base64);}}),/*#__PURE__*/_jsxs(\"div\",{className:classes.buttons,children:[/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"outlined\",onClick:closeEditMode,children:\"Cancel\"}),\" \",/*#__PURE__*/_jsx(Button,{color:\"secondary\",variant:\"outlined\",type:\"submit\",children:\"Save\"})]})]})});};export default EditPostForm;","map":{"version":3,"names":["React","useState","FileBase64","useDispatch","makeStyles","TextField","Select","Input","MenuItem","Button","useForm","Controller","yupResolver","yup","updatePost","useStyles","theme","textField","marginBottom","spacing","buttons","marginTop","tags","postSchema","object","shape","title","string","required","subtitle","content","min","tag","mixed","oneOf","EditPostForm","history","post","closeEditMode","dispatch","image","file","setFile","resolver","register","handleSubmit","control","errors","reset","onSubmit","data","updatedPost","_id","classes","map","index","base64"],"sources":["/home/user/Desktop/blogify/client/src/components/EditPostForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport FileBase64 from \"react-file-base64\";\nimport { useDispatch } from \"react-redux\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { TextField, Select, Input, MenuItem, Button } from \"@material-ui/core\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport { updatePost } from \"../actions/post\";\n\nconst useStyles = makeStyles((theme) => ({\n  textField: {\n    marginBottom: theme.spacing(2),\n  },\n  buttons: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst tags = [\"fun\", \"programming\", \"health\", \"science\"];\n\nconst postSchema = yup.object().shape({\n  title: yup.string().required(),\n  subtitle: yup.string().required(),\n  content: yup.string().min(20).required(),\n  tag: yup.mixed().oneOf(tags),\n});\n\nconst EditPostForm = ({ history, post, closeEditMode }) => {\n  const dispatch = useDispatch();\n\n  const [file, setFile] = useState(post?.image);\n  const { register, handleSubmit, control, errors, reset } = useForm({\n    resolver: yupResolver(postSchema),\n  });\n\n  const onSubmit = (data) => {\n    const updatedPost = {\n      _id: post._id,\n      ...data,\n      image: file,\n    };\n   dispatch(updatePost(post._id, updatedPost));\n\n    reset();\n    setFile(null);\n    closeEditMode();\n  };\n\n  const classes = useStyles();\n  return (\n    <div>\n      <form noValidate autoComplete=\"off\" onSubmit={handleSubmit(onSubmit)}>\n        <TextField\n          id=\"title\"\n          label=\"Title\"\n          name=\"title\"\n          variant=\"outlined\"\n          className={classes.textField}\n          size=\"small\"\n          inputRef={register}\n          error={errors.title ? true : false}\n          fullWidth\n          defaultValue={post?.title}\n        />\n        <TextField\n          id=\"subtitle\"\n          label=\"Subtitle\"\n          name=\"subtitle\"\n          variant=\"outlined\"\n          className={classes.textField}\n          size=\"small\"\n          inputRef={register}\n          error={errors.subtitle ? true : false}\n          fullWidth\n          defaultValue={post?.subtitle}\n        />\n        <Controller\n          as={\n            <Select input={<Input />} className={classes.textField}>\n              {tags.map((tag, index) => (\n                <MenuItem key={index} value={tag}>\n                  {tag}\n                </MenuItem>\n              ))}\n            </Select>\n          }\n          name=\"tag\"\n          control={control}\n          error={errors.tag ? true : false}\n          defaultValue={post?.tag}\n        />\n        <TextField\n          id=\"content\"\n          label=\"Content\"\n          name=\"content\"\n          multiline\n          size=\"small\"\n          inputRef={register}\n          rows={4}\n          className={classes.textField}\n          variant=\"outlined\"\n          error={errors.content ? true : false}\n          fullWidth\n          defaultValue={post?.content}\n        />\n        <FileBase64 multiple={false} onDone={({ base64 }) => setFile(base64)} />\n        <div className={classes.buttons}>\n          <Button color=\"primary\" variant=\"outlined\" onClick={closeEditMode}>\n            Cancel\n          </Button>{\" \"}\n          <Button color=\"secondary\" variant=\"outlined\" type=\"submit\">\n            Save\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default EditPostForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}
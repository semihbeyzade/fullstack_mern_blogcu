{"ast":null,"code":"import _objectSpread from\"/home/user/Desktop/blogify/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/user/Desktop/blogify/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import FileBase64 from\"react-file-base64\";import{makeStyles}from\"@material-ui/core/styles\";import{useForm,Controller}from\"react-hook-form\";import{yupResolver}from\"@hookform/resolvers/yup\";import*as yup from\"yup\";import{Button,Dialog,DialogActions,DialogContent,DialogContentText,DialogTitle,Input,MenuItem,Select,TextField}from\"@material-ui/core\";import{useDispatch}from\"react-redux\";import{createPost}from\"../actions/post\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{paper:{padding:theme.spacing(2)},textField:{marginBottom:theme.spacing(2)}};});var tags=[\"fun\",\"programming\",\"health\",\"science\"];var postSchema=yup.object().shape({title:yup.string().required(),subtitle:yup.string().required(),content:yup.string().min(20).required(),tag:yup.mixed().oneOf(tags)});var AddPostForm=function AddPostForm(_ref){var open=_ref.open,handleClose=_ref.handleClose;var dispatch=useDispatch();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useForm=useForm({resolver:yupResolver(postSchema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,control=_useForm.control,errors=_useForm.errors,reset=_useForm.reset;var onSubmit=function onSubmit(data){console.log(_objectSpread(_objectSpread({},data),{},{file:file}));dispatch(createPost(_objectSpread(_objectSpread({},data),{},{image:file})));clearForm();};var clearForm=function clearForm(){reset();setFile(null);handleClose();};var classes=useStyles();return/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleClose,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Create a new post\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(DialogContentText,{children:\"To subscribe to this website, please enter your email address here. We will send updates occasionally.\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsxs(\"form\",{noValidate:true,autoComplete:\"off\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(TextField,{id:\"title\",label:\"Title\",name:\"title\",variant:\"outlined\",className:classes.textField,size:\"small\",inputRef:register,error:errors.title?true:false,fullWidth:true}),/*#__PURE__*/_jsx(TextField,{id:\"subtitle\",label:\"Subtitle\",name:\"subtitle\",variant:\"outlined\",className:classes.textField,size:\"small\",inputRef:register,error:errors.subtitle?true:false,fullWidth:true}),/*#__PURE__*/_jsx(Controller,{as:/*#__PURE__*/_jsx(Select,{input:/*#__PURE__*/_jsx(Input,{}),className:classes.textField,fullWidth:true,children:tags.map(function(tag,index){return/*#__PURE__*/_jsx(MenuItem,{value:tag,children:tag},index);})}),name:\"tag\",control:control,error:errors.tag?true:false,defaultValue:tags[0]}),/*#__PURE__*/_jsx(TextField,{id:\"content\",label:\"Content\",name:\"content\",variant:\"outlined\",multiline:true,rows:4,className:classes.textField,size:\"small\",inputRef:register,error:errors.content?true:false,fullWidth:true}),/*#__PURE__*/_jsx(FileBase64,{multiple:false,onDone:function onDone(_ref2){var base64=_ref2.base64;return setFile(base64);}})]})})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{color:\"inherit\",onClick:clearForm,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"outlined\",color:\"primary\",onClick:function onClick(){return handleSubmit(onSubmit)();},children:\"Publish\"})]})]});};export default AddPostForm;","map":{"version":3,"names":["React","useState","FileBase64","makeStyles","useForm","Controller","yupResolver","yup","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Input","MenuItem","Select","TextField","useDispatch","createPost","useStyles","theme","paper","padding","spacing","textField","marginBottom","tags","postSchema","object","shape","title","string","required","subtitle","content","min","tag","mixed","oneOf","AddPostForm","open","handleClose","dispatch","file","setFile","resolver","register","handleSubmit","control","errors","reset","onSubmit","data","console","log","image","clearForm","classes","root","map","index","base64"],"sources":["/home/user/Desktop/blogify/client/src/components/AddPostForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport FileBase64 from \"react-file-base64\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Input,\n  MenuItem,\n  Select,\n  TextField,\n} from \"@material-ui/core\";\nimport { useDispatch } from \"react-redux\";\nimport { createPost } from \"../actions/post\" \n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    padding: theme.spacing(2),\n  },\n  textField: {\n    marginBottom: theme.spacing(2),\n  },\n}));\n\nconst tags = [\"fun\", \"programming\", \"health\", \"science\"];\n\nconst postSchema = yup.object().shape({\n  title: yup.string().required(),\n  subtitle: yup.string().required(),\n  content: yup.string().min(20).required(),\n  tag: yup.mixed().oneOf(tags),\n});\n\nconst AddPostForm = ({ open, handleClose }) => {\n  const dispatch = useDispatch();\n\n  const [file, setFile] = useState(null);\n\n  const { register, handleSubmit, control, errors, reset } = useForm({\n    resolver: yupResolver(postSchema),\n  });\n\n  const onSubmit = (data) => {\n    console.log({...data, file});\n    dispatch(createPost({ ...data, image: file }));\n    clearForm();\n  };\n\n  const clearForm = () => {\n    reset();\n    setFile(null);\n    handleClose();\n  };\n\n  const classes = useStyles();\n\n  return (\n    <Dialog open={open} onClose={handleClose}>\n      <DialogTitle>Create a new post</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          To subscribe to this website, please enter your email address here. We\n          will send updates occasionally.\n        </DialogContentText>\n\n        <div className={classes.root}>\n          <form noValidate autoComplete=\"off\" onSubmit={handleSubmit(onSubmit)}>\n            <TextField\n              id=\"title\"\n              label=\"Title\"\n              name=\"title\"\n              variant=\"outlined\"\n              className={classes.textField}\n              size=\"small\"\n              inputRef={register}\n              error={errors.title ? true : false}\n              fullWidth\n            />\n            <TextField\n              id=\"subtitle\"\n              label=\"Subtitle\"\n              name=\"subtitle\"\n              variant=\"outlined\"\n              className={classes.textField}\n              size=\"small\"\n              inputRef={register}\n              error={errors.subtitle ? true : false}\n              fullWidth\n            />\n\n            <Controller\n              as={\n                <Select\n                  input={<Input />}\n                  className={classes.textField}\n                  fullWidth\n                >\n                  {tags.map((tag, index) => (\n                    <MenuItem key={index} value={tag}>\n                      {tag}\n                    </MenuItem>\n                  ))}\n                </Select>\n              }\n              name=\"tag\"\n              control={control}\n              error={errors.tag ? true : false}\n              defaultValue={tags[0]}\n            />\n            <TextField\n              id=\"content\"\n              label=\"Content\"\n              name=\"content\"\n              variant=\"outlined\"\n              multiline\n              rows={4}\n              className={classes.textField}\n              size=\"small\"\n              inputRef={register}\n              error={errors.content ? true : false}\n              fullWidth\n            />\n            <FileBase64\n              multiple={false}\n              onDone={({ base64 }) => setFile(base64)}\n            />\n          </form>\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Button color=\"inherit\" onClick={clearForm}>\n          Cancel\n        </Button>\n        <Button\n          type=\"submit\"\n          variant=\"outlined\"\n          color=\"primary\"\n          onClick={() => handleSubmit(onSubmit)()}\n        >\n          Publish\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default AddPostForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _slicedToArray from\"/home/user/Desktop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import moment from\"moment\";import{useDispatch,useSelector}from\"react-redux\";import{makeStyles}from\"@material-ui/core/styles\";import{Typography,Paper,Divider,Button,Chip}from\"@material-ui/core\";import EditIcon from\"@material-ui/icons/Edit\";import DeleteIcon from\"@material-ui/icons/Delete\";import{fetchSinglePost,deletePost}from\"../actions/post\";import noImage from\"../images/noimage.svg\";import EditPostForm from\"./EditPostForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{paper:{padding:theme.spacing(3),marginBottom:theme.spacing(8)},header:{display:\"flex\",justifyContent:\"space-between\"},content:{marginTop:theme.spacing(3)},image:{width:\"100%\",borderRadius:5,marginTop:theme.spacing(3),marginBottom:theme.spacing(4)},chip:{marginTop:theme.spacing(1)}};});var PostDetails=function PostDetails(_ref){var match=_ref.match,history=_ref.history,location=_ref.location;var id=match.params.id;var dispatch=useDispatch();var currentPost=useSelector(function(state){return state.posts.currentPost;});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editMode=_useState2[0],setEditMode=_useState2[1];var openEditMode=function openEditMode(){setEditMode(true);};var closeEditMode=function closeEditMode(){setEditMode(false);};useEffect(function(){dispatch(fetchSinglePost(id));},[dispatch,id]);var convertRelativeTime=function convertRelativeTime(date){return moment(date).fromNow();};var removePost=function removePost(){dispatch(deletePost(currentPost._id));history.push(\"/posts\");};var classes=useStyles();return/*#__PURE__*/_jsx(Paper,{className:classes.paper,elevation:0,children:editMode?/*#__PURE__*/_jsx(EditPostForm,{post:currentPost,closeEditMode:closeEditMode}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.header,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:currentPost===null||currentPost===void 0?void 0:currentPost.title}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(EditIcon,{}),onClick:openEditMode,children:\"Edit\"}),\" \",/*#__PURE__*/_jsx(Button,{color:\"secondary\",variant:\"outlined\",onClick:removePost,startIcon:/*#__PURE__*/_jsx(DeleteIcon,{}),children:\"Delete\"})]})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Typography,{variant:\"overline\",gutterBottom:true,children:currentPost===null||currentPost===void 0?void 0:currentPost.subtitle}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",component:\"p\",gutterBottom:true,children:[convertRelativeTime(currentPost===null||currentPost===void 0?void 0:currentPost.createdAt),\" by Semih\"]}),/*#__PURE__*/_jsx(Chip,{label:\"# \".concat(currentPost===null||currentPost===void 0?void 0:currentPost.tag),variant:\"outlined\",className:classes.chip}),/*#__PURE__*/_jsxs(\"div\",{className:classes.content,children:[/*#__PURE__*/_jsx(\"img\",{src:(currentPost===null||currentPost===void 0?void 0:currentPost.image)||noImage,alt:\"Post\",className:classes.image}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",gutterBottom:true,children:currentPost===null||currentPost===void 0?void 0:currentPost.content})]})]})});};export default PostDetails;","map":{"version":3,"names":["React","useEffect","useState","moment","useDispatch","useSelector","makeStyles","Typography","Paper","Divider","Button","Chip","EditIcon","DeleteIcon","fetchSinglePost","deletePost","EditPostForm","useStyles","theme","paper","padding","spacing","marginBottom","header","display","justifyContent","content","marginTop","image","width","borderRadius","chip","PostDetails","match","history","location","id","params","dispatch","currentPost","state","posts","editMode","setEditMode","openEditMode","closeEditMode","convertRelativeTime","date","fromNow","removePost","_id","push","classes","title","subtitle","createdAt","tag","noImage"],"sources":["/home/user/Desktop/client/src/components/PostDetails.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport moment from \"moment\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Typography, Paper, Divider, Button, Chip } from \"@material-ui/core\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport { fetchSinglePost, deletePost } from \"../actions/post\";\nimport noImage from \"../images/noimage.svg\";\nimport EditPostForm from \"./EditPostForm\";\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n      padding: theme.spacing(3),\n      marginBottom: theme.spacing(8),\n    },\n    header: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n    },\n    content: {\n      marginTop: theme.spacing(3),\n    },\n    image: {\n      width: \"100%\",\n      borderRadius: 5,\n      marginTop: theme.spacing(3),\n      marginBottom: theme.spacing(4),\n    },\n    chip: {\n      marginTop: theme.spacing(1),\n    },\n  }));\n\nconst PostDetails = ({ match, history, location }) => {\n    const {id} = match.params;\n    const dispatch = useDispatch();\n\n  const currentPost = useSelector((state) => state.posts.currentPost);\n\n  const [editMode, setEditMode] = useState(false);\n\n  const openEditMode = () => {\n    setEditMode(true);\n  };\n  const closeEditMode = () => {\n    setEditMode(false);\n  };\n\n    useEffect(() => {\n        dispatch(fetchSinglePost(id));\n      }, [dispatch, id]);\n\n      const convertRelativeTime = (date) => {\n        return moment(date).fromNow();\n      };\n    \n      const removePost = () => {\n        dispatch(deletePost(currentPost._id));\n        history.push(\"/posts\");\n      };\n\n    const classes = useStyles();\n  return (\n    <Paper className={classes.paper} elevation={0}>\n    {editMode ? (\n       <EditPostForm post={currentPost} closeEditMode={closeEditMode} /> \n    ) : (\n      <div>\n        <div className={classes.header}>\n          <Typography variant=\"h5\" gutterBottom>\n            {currentPost?.title}\n          </Typography>\n          <div>\n            <Button\n              color=\"primary\"\n              variant=\"outlined\"\n              startIcon={<EditIcon />}\n              onClick={openEditMode}\n            >\n              Edit\n            </Button>{\" \"}\n            <Button\n              color=\"secondary\"\n              variant=\"outlined\"\n              onClick={removePost}\n              startIcon={<DeleteIcon />}\n            >\n              Delete\n            </Button>\n          </div>\n        </div>\n\n        <Divider />\n        <Typography variant=\"overline\" gutterBottom>\n          {currentPost?.subtitle}\n        </Typography>\n        <Typography variant=\"caption\" component=\"p\" gutterBottom>\n          {convertRelativeTime(currentPost?.createdAt)} by Semih\n        </Typography>\n        <Chip\n          label={`# ${currentPost?.tag}`}\n          variant=\"outlined\"\n          className={classes.chip}\n        />\n\n        <div className={classes.content}>\n          <img\n            src={currentPost?.image || noImage}\n            alt=\"Post\"\n            className={classes.image}\n          />\n          <Typography variant=\"body1\" gutterBottom>\n            {currentPost?.content}\n          </Typography>\n        </div>\n      </div>\n    )}\n  </Paper>\n  )\n}\n\nexport default PostDetails"],"mappings":"+GAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,OAAP,KAAmB,QAAnB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,OAASC,UAAT,CAAqBC,KAArB,CAA4BC,OAA5B,CAAqCC,MAArC,CAA6CC,IAA7C,KAAyD,mBAAzD,CACA,MAAOC,SAAP,KAAqB,yBAArB,CACA,MAAOC,WAAP,KAAuB,2BAAvB,CACA,OAASC,eAAT,CAA0BC,UAA1B,KAA4C,iBAA5C,C,2CAEA,MAAOC,aAAP,KAAyB,gBAAzB,C,wFAEA,GAAMC,UAAS,CAAGX,UAAU,CAAC,SAACY,KAAD,QAAY,CACrCC,KAAK,CAAE,CACLC,OAAO,CAAEF,KAAK,CAACG,OAAN,CAAc,CAAd,CADJ,CAELC,YAAY,CAAEJ,KAAK,CAACG,OAAN,CAAc,CAAd,CAFT,CAD8B,CAKrCE,MAAM,CAAE,CACNC,OAAO,CAAE,MADH,CAENC,cAAc,CAAE,eAFV,CAL6B,CASrCC,OAAO,CAAE,CACPC,SAAS,CAAET,KAAK,CAACG,OAAN,CAAc,CAAd,CADJ,CAT4B,CAYrCO,KAAK,CAAE,CACLC,KAAK,CAAE,MADF,CAELC,YAAY,CAAE,CAFT,CAGLH,SAAS,CAAET,KAAK,CAACG,OAAN,CAAc,CAAd,CAHN,CAILC,YAAY,CAAEJ,KAAK,CAACG,OAAN,CAAc,CAAd,CAJT,CAZ8B,CAkBrCU,IAAI,CAAE,CACJJ,SAAS,CAAET,KAAK,CAACG,OAAN,CAAc,CAAd,CADP,CAlB+B,CAAZ,EAAD,CAA5B,CAuBA,GAAMW,YAAW,CAAG,QAAdA,YAAc,MAAkC,IAA/BC,MAA+B,MAA/BA,KAA+B,CAAxBC,OAAwB,MAAxBA,OAAwB,CAAfC,QAAe,MAAfA,QAAe,CAClD,GAAOC,GAAP,CAAaH,KAAK,CAACI,MAAnB,CAAOD,EAAP,CACA,GAAME,SAAQ,CAAGlC,WAAW,EAA5B,CAEF,GAAMmC,YAAW,CAAGlC,WAAW,CAAC,SAACmC,KAAD,QAAWA,MAAK,CAACC,KAAN,CAAYF,WAAvB,EAAD,CAA/B,CAEA,cAAgCrC,QAAQ,CAAC,KAAD,CAAxC,wCAAOwC,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,aAAY,CAAG,QAAfA,aAAe,EAAM,CACzBD,WAAW,CAAC,IAAD,CAAX,CACD,CAFD,CAGA,GAAME,cAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC1BF,WAAW,CAAC,KAAD,CAAX,CACD,CAFD,CAIE1C,SAAS,CAAC,UAAM,CACZqC,QAAQ,CAACxB,eAAe,CAACsB,EAAD,CAAhB,CAAR,CACD,CAFM,CAEJ,CAACE,QAAD,CAAWF,EAAX,CAFI,CAAT,CAIE,GAAMU,oBAAmB,CAAG,QAAtBA,oBAAsB,CAACC,IAAD,CAAU,CACpC,MAAO5C,OAAM,CAAC4C,IAAD,CAAN,CAAaC,OAAb,EAAP,CACD,CAFD,CAIA,GAAMC,WAAU,CAAG,QAAbA,WAAa,EAAM,CACvBX,QAAQ,CAACvB,UAAU,CAACwB,WAAW,CAACW,GAAb,CAAX,CAAR,CACAhB,OAAO,CAACiB,IAAR,CAAa,QAAb,EACD,CAHD,CAKF,GAAMC,QAAO,CAAGnC,SAAS,EAAzB,CACF,mBACE,KAAC,KAAD,EAAO,SAAS,CAAEmC,OAAO,CAACjC,KAA1B,CAAiC,SAAS,CAAE,CAA5C,UACCuB,QAAQ,cACN,KAAC,YAAD,EAAc,IAAI,CAAEH,WAApB,CAAiC,aAAa,CAAEM,aAAhD,EADM,cAGP,oCACE,aAAK,SAAS,CAAEO,OAAO,CAAC7B,MAAxB,wBACE,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,YAAY,KAArC,UACGgB,WADH,SACGA,WADH,iBACGA,WAAW,CAAEc,KADhB,EADF,cAIE,oCACE,KAAC,MAAD,EACE,KAAK,CAAC,SADR,CAEE,OAAO,CAAC,UAFV,CAGE,SAAS,cAAE,KAAC,QAAD,IAHb,CAIE,OAAO,CAAET,YAJX,kBADF,CAQY,GARZ,cASE,KAAC,MAAD,EACE,KAAK,CAAC,WADR,CAEE,OAAO,CAAC,UAFV,CAGE,OAAO,CAAEK,UAHX,CAIE,SAAS,cAAE,KAAC,UAAD,IAJb,oBATF,GAJF,GADF,cAyBE,KAAC,OAAD,IAzBF,cA0BE,KAAC,UAAD,EAAY,OAAO,CAAC,UAApB,CAA+B,YAAY,KAA3C,UACGV,WADH,SACGA,WADH,iBACGA,WAAW,CAAEe,QADhB,EA1BF,cA6BE,MAAC,UAAD,EAAY,OAAO,CAAC,SAApB,CAA8B,SAAS,CAAC,GAAxC,CAA4C,YAAY,KAAxD,WACGR,mBAAmB,CAACP,WAAD,SAACA,WAAD,iBAACA,WAAW,CAAEgB,SAAd,CADtB,eA7BF,cAgCE,KAAC,IAAD,EACE,KAAK,aAAOhB,WAAP,SAAOA,WAAP,iBAAOA,WAAW,CAAEiB,GAApB,CADP,CAEE,OAAO,CAAC,UAFV,CAGE,SAAS,CAAEJ,OAAO,CAACrB,IAHrB,EAhCF,cAsCE,aAAK,SAAS,CAAEqB,OAAO,CAAC1B,OAAxB,wBACE,YACE,GAAG,CAAE,CAAAa,WAAW,OAAX,EAAAA,WAAW,SAAX,QAAAA,WAAW,CAAEX,KAAb,GAAsB6B,OAD7B,CAEE,GAAG,CAAC,MAFN,CAGE,SAAS,CAAEL,OAAO,CAACxB,KAHrB,EADF,cAME,KAAC,UAAD,EAAY,OAAO,CAAC,OAApB,CAA4B,YAAY,KAAxC,UACGW,WADH,SACGA,WADH,iBACGA,WAAW,CAAEb,OADhB,EANF,GAtCF,GAJF,EADF,CAyDD,CAtFD,CAwFA,cAAeM,YAAf"},"metadata":{},"sourceType":"module"}